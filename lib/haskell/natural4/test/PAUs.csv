//,,,live updates,TRUE,,devMode port,8090,TRUE,,,,,,,,,,
//,CASE STUDY:   CONTRACT —  Singapore Personal Accident  ·  Insurance Policy,,,,,,,,,,,,,,,,,
//,https://docs.google.com/document/d/1BUP-byDd7K9kaK-ulkRDH3lHawiBDcwGI_1VvuxYFdM/edit?usp=sharing,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,§,Personal Accident Policy,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,§§,Ontology – Data Types,,,,,,,,,,,,,,
,,,DECLARE,PolicyHolder,,,IS A,Person,,,,,,,,,,
,,,HAS,address,,,IS AN,Address,"// SPEC: given, obvs",,,//,"address(Policy, Address, ann([type(address), srcref(row(9)) ]) )",,,,,
,,,,birthdate,,,IS A,Date,"// SPEC: given, but possibly mutable in UI",,,//,"birthdate(Policy, Birthdate, ann([type(date), srcref(row(10)) ]) )",,,,,
,,,,current policy,,,IS A,Policy,"// SPEC: given, obvs",,,//,"current_policy(Policy, Current_policy, ann([type(policy), srcref(row(11)) ]) )",,,,,
,,,,past policies,,IS,LIST OF,Policy,// can skip because we have the below,,,//,"past_policies(PolicyHolder, [ Policy | Policys ], ann([type(policy), srcref(row(12)) ]) )",,,,,
,,,,addSA over all policies,,,IS A,Money,"// SPEC: given, no need to compute",,,//,"addSA_over_all_policies(Policy, AddSA_over_all_policies, ann([type(money), srcref(row(13)) ]) )",,,,,
,,,,past ADD payouts,,,IS A,Money,"// SPEC: given, no need to compute",,,//,"past_ADD_payouts(Policy, Past_ADD_payouts, ann([type(money), srcref(row(14)) ]) )",,,,,
,,,,death date,,,IS,OPTIONAL,,Date,,,,,,,,
,,,//,SELECT sum(claims.amount) FROM `past policies` JOIN claims ON claims.policy = past policies.id WHERE claims.outcome = Successful,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,DECLARE,Policy,,,IS A,Contract,,,,,,,,,,
,,,HAS,planAF,,,IS A,PlanAF,,,,//,"planAF(Policy, PlanAF, ann([type(planAF), srcref(row(19)) ]) )",,,,,
,,,,benADD,,,IS A,Benefit,,,,//,"benADD(Policy, BenADD, ann([type(benefit), srcref(row(20)) ]) )",,,,,
,,,,benMR,,,IS A,Benefit,,,,//,"benMR(Policy, BenMR, ann([type(benefit), srcref(row(21)) ]) )",,,,,
,,,,benTCM,,,IS A,Benefit,,,,//,"benTCM(Policy, BenTCM, ann([type(benefit), srcref(row(22)) ]) )",,,,,
,,,,benRA,,,IS,OPTIONAL,,Benefit,,//,"benRA(Policy, BenRA, ann([type(benefit), optional, srcref(row(23)) ]) )",,,,,
,,,,benFCPA,,,IS,OPTIONAL,,Benefit,,//,"benFCPA(Policy, BenFCPA, ann([type(benefit), optional, srcref(row(24)) ]) )",,,,,
,,,,accidents,,IS,LIST OF,Accident,,,,//,"accidents(Policy, [ Accident | Accidents ], ann([type(accident), srcref(row(25)) ]) )",,,,,
,,,,start date,,,IS A,Date,,,,//,"start_date(Policy, Start_date, ann([type(date), srcref(row(26)) ]) )",,,,,
,,,,ended,,,IS A,Boolean,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,DECLARE,Claim,,,,,,,,,,,,,,
,,,HAS,date,,,IS A,Date,,,,//,"date(Claim, Date, ann([type(date), srcref(row(30)) ]) )",,,,,
,,,,outcome,,IS,ONE OF,Successful,,Unsuccessful,,//,"outcome(Claim, Outcome, ann([type(successful), srcref(row(31)) ]) )",,,,,
,,,,amount,,,IS A,Money,,,,//,"amount(Claim, Amount, ann([type(money), srcref(row(32)) ]) )",,,,,
,,,,general exclusions apply,,,IS A,Boolean,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,DECLARE,Accident,,,,,,,,,,,,,,
,,,HAS,injuries,,IS,SET OF,loss,,,,//,"injuries(Accident, [ Loss | Losss ], ann([type(loss), srcref(row(36)) ]) )",,,,,
,,,,general exclusions apply,,,IS A,Boolean,,,,,,,,,,
,,,,juvenile limit applies,,,IS A,Boolean,,,,,,,,,,
,,,,triple benefits apply,,,IS A,Boolean,,,,,,,,,,
,,,,double benefits apply,,,IS A,Boolean,,,,,,,,,,
,,,,risk percentage,,,IS A,Number,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,DECLARE,Benefit,,,,,,,,,,,,,,
,,,HAS,initial sum assured,,,IS A,Number,,,,//,"initial_sum_assured(Benefit, Initial_sum_assured, ann([type(number), srcref(row(44)) ]) )",,,,,
,,,,stepUpSumAssured,,,IS A,Number,,,,//,"stepUpSumAssured(Policy, StepUpSumAssured, ann([type(number), srcref(row(45)) ]) )",,,,,
,,,,name,,,IS A,String,,,,//,"name(Benefit, Name, ann([type(string), srcref(row(46)) ]) )",,,,,
,,,,claim,,,IS A,Claim,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,DECLARE,PlanAF,,,IS,ONE OF,planA,planB,planC,planD,planE,planF,//,planAF(planA),...,planAF(planF)
,,,DECLARE,Plan14,,,IS,ONE OF,plan1,plan2,plan3,plan4,,,,,,
,,,,,,,,,,,,,,,,,,
,,,§§,PAU0,,,,,,,,,,,,,,
,,,GIVEN,addBenefit,,,IS A,,Number,,,,,,,,,
,,,,otherBenefits,,,IS,LIST OF,Number,,,,,,,,,
,,,,policy,,,IS A,,Policy,,,,,,,,,
,,,,policyHolder,,,IS A,,PolicyHolder,,,,,,,,,
,,,,accident,,,IS AN,,Accident,,,,,,,,,
,,,,illness,,,IS A,,Claim,,,,,,,,,
,,,,user input,,,IS A,,Dictionary,,,,,,,,,
,,,GIVETH,The Answer,,,IS A,,Number,,,,,,,,,
,,,DECIDE,The Answer,,IS,accident branch,,IF,,user input's,accident_claim,,IS,selected,,,
,,,,"""",,"""",illness branch,,OTHERWISE,,,,,,,,,
,,,WHERE,accident branch,,IS,excludedZero,,IF,,ADD is disqualified entirely,,,,,,,
,,,,"""",,"""",ADD benefit,,OTHERWISE,,,,,,,,,
,,,,illness branch,,IS,excludedZero,,IF,,illness,IS,disqualified,,,,,
,,,,"""",,"""",policy's,benMR,OTHERWISE,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,ADD is disqualified entirely,,,IF,,policyHolder's,age,>=,75,,,,,,
,,,,,,,OR,,accident's,general exclusions apply,,,,,,,,
,,,,,,,OR,,policy's,ended,,,,,,,,
,,,,excludedZero,,IS,0,,,,,,,,,,,
,,,,ADD benefit,,IS,,MIN,SUM,addBenefit,,,,,,,,
,,,,,,,,,,otherBenefits,,,,,,,,
,,,,,,,,,risk cap,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,illness,IS,disqualified,,IF,,illness's,general exclusions apply,,,,,,,
,,,,,,,,OR,,policy's,ended,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,//,DECIDE,ADD benefit,,AKA,maximum claim is capped by the risk cap,,,,,,,,,,,
,,//,IS,,MIN,SUM,addBenefit,,,,,,,,,,,
,,//,,,,,otherBenefits,,,,,,,,,,,
,,//,,,,risk cap,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,§§,PAU4,,,,,,,,,,,,,,
,,,GIVEN,policy,,,IS A,,Policy,,,,,,,,,
,,,,policyHolder,,,IS A,,PolicyHolder,,,,,,,,,
,,,,accident,,,IS AN,,Accident,,,,,,,,,
,,,GIVETH,Step 4,,,IS A,,Number,,,,,,,,,
,,,DECIDE,Step 1,,,IS,,claimable limited base ADD benefit,,,IF,there were past ADD payouts,,,,,
,,,,"""",,,"""",,base ADD benefit,,,OTHERWISE,,,,,,
,,,,Step 2,,,IS,,juvenile limited,,,IF,accident's,,juvenile limit applies,,,
,,,,"""",,,"""",,Step 1,,,OTHERWISE,,,,,,
,,,,Step 3,,,IS,,multiplied by double triple benefit,,,,,,,,,
,,,,Step 4,,,IS,,Step 3,discounted by,,accident's,risk percentage,,,,,
,,,,,,,,,,,,,,,,,,
,,,WHERE,base ADD benefit,,,,IS,policy's,benADD,,,,,,,,
,,,,there were past ADD payouts,,,,IF,policyHolder's,,past ADD payouts,,>,0,,,,
,,,,claimable limited base ADD benefit,,,,IS,claimable limit,,-,policyHolder's past ADD payouts,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,juvenile limited,,,,IS,MIN,,Part 1,,,,,,,
,,,,,,,,,,,juvenile limit,,,,,,,
,,,,multiplied by double triple benefit,,,IS,Step 2,*,3,IF,accident's,,triple benefits apply,,,,
,,,,"""",,,"""",Step 2,*,2,IF,accident's,,double benefits apply,,,,
,,,,"""",,,"""",Step 2,,,OTHERWISE,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,§§,Top-Level,,,,,,,,,,,,,,
,,,GIVEN,policy,,,IS A,,Policy,,,,,,,,,
,,,,policyHolder,,,IS A,,PolicyHolder,,,,,,,,,
,,,,accident,,,IS AN,,Accident,,,,,,,,,
,,,,illness,,,IS A,,Claim,,,,,,,,,
,,,,user input,,,IS A,,Dictionary,,,,,,,,,
,,,GIVETH,How Much Money Do You Get,,,IS A,,Number,,,,,,,,,
,,,DECIDE,How Much Money Do You Get,,,IS,,PAU0,,,,,,,,,
,,,WHERE,addBenefit,,,,IS,PAU4,,,,,,,,,
,,,,otherBenefits,,,,IS,1,2,3,4,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,§§§,subsidiary computations,,,,,,,,,,,,,,
,,,GIVEN,total sum assured,,,IS A,,Number,,,,,,,,,
,,,DECIDE,claimable limit,,,,IS,,MIN,PRODUCT,1.5,,,,,,
,,,,,,,,,,,,total sum assured,,,,,,
,,,,,,,,,,,lifetime claimable limit,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,GIVEN,x,,,IS A,Number,,,,,,,,,,
,,,,y,,,IS A,Number,,,,,,,,,,
,,,DECIDE,x,discounted by,y,IS,x * (1 - y),,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,
,,,DECIDE,lifetime claimable limit,,IS,"$4,500,000",,,,,,,,,,,
,,,,juvenile limit,,IS,"$500,000",,,,,,,,,,,