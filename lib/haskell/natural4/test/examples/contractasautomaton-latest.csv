//,,live updates,TRUE,,devMode port,8081,,FALSE,,,,,,,,,
//,"CASE STUDY:   CONTRACT  —  US Treasury, Office of Financial Research & Vermont Law School  ·  Loan Agreement",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,Flood & Goodenough: Contract As Automaton,,,,,,,,,,,,,,,,6 Sep 2021
//,"In this lesson, we explore the ""moving parts"" of a contract, as we formalize a loan agreement.",,,,,,,,,,,,,,,,
//,We thank Mark Flood & Oliver Goodenough for authoring the paper from which this example is drawn.,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"Executive Summary
A lender offers a loan with interest. The borrower repays principal plus interest in two instalments.
If any events of default occur – perhaps the borrower fails to file taxes – the lender sternly warns the borrower,
who then has a few days to cure the default; if they cannot cure it, they repay the loan.",,,,,,,,,,,,,,,,
//,"For the full text of the contract, see the original paper at",,,,,,,,,,,,,,,,
//,https://law.stanford.edu/publications/contract-as-automaton-the-computational-representation-of-financial-agreements/,,,,,,,,,,,,,,,,
//,,,,,,,,,,,,,,,,,
//,"This case illustrates L4's treatment of regulative rules as state transitions.
There are no constitutive rules in this example. This case is all about regulative rules, connected up in a process workflow diagram.
We are concerned with events occurring in time, and the positions of the parties changing in response.
Without further ado, we formalize the agreement in L4 syntax.",,,,,,,,,,,,,,,,
//,,,,,,,,,,,,,,,,,
,§,Our template for a loan agreement has certain standard elements.,,,,,,,,,,,,,,,
//,"In practice, standard elements like this would be incorporated by reference to some library of model terms.",,,,,,,,,,,,,,,,
//,"A programmer would recognize this as a set of importable class and type definitions – a ""background ontology"" or ""schema"".",,,,,,,,,,,,,,,,
,DECLARE,Loan,,IS,AN,Agreement,,,,,,,,,,,
,HAS,Lender,,IS,A,Person,,,,,,,,,,,
,,Borrower,,IS,A,Person,,,,,,,,,,,
,,Closing,,IS,A,Date,,,,,,,,,,,
,,Principal,,IS,A,Money,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"If you are familiar with Object-Oriented Programming, you may be saying to yourself:
I see what's going on here … class loan extends class agreement with four additional
attributes, each of which is typed with a class as well.
The ""IS A"" syntax does double duty for both extends and type-of.
Presumably, some L4 standard library declares a Person class with name, address, ID, etc, attributes.
Money probably includes notions of currency, amount, and so on.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,The particulars of a deal follow the template.,,,,,,,,,,,,,,,
//,"In software-speak, we configure our program by defining variables and instantiating classes.",,,,,,,,,,,,,,,,
,DEFINE,F_and_G,,IS,A,Loan,,,,,,,,,,,
,HAS,Mark,,IS,THE,Lender,,,,,,,,,,,
,,Oliver,,IS,THE,Borrower,,,,,,,,,,,
,,1 Jun 2014,,IS,THE,Closing,,,,,,,,,,,
,,"$1,000",,IS,THE,Principal,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"We fill in the blanks: we instantiate the Loan class to an particular object called ""F&G"".
In this section, instead of declare, we say define. The details follow the template.
These particulars are exportable to JSON and other formats which can be consumed by existing software.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,Contract Commencement,,,,,,,,,,,,,,,
//,"The game begins when one party asks for money, and the other party sends it.",,,,,,,,,,,,,,,,
,PARTY,Borrower,,,,,,,,,,,,,,,
,MAY,request funds,,,,,,,,,,,,,,,
,,from,Lender,,,,,,,,,,,,,,
,BY,1 June 2014,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,HENCE,,PARTY,Lender,,,,,,,,,,,,,
,,,MUST,,remit,principal,,,,,,,,,,,
,,,,,in the amount of,"$1,000",,,,,,,,,,,
,,,,,to,Borrower,,,,,,,,,,,
,,,WITHIN,1,day,,,,,,,,,,,,
,,,HENCE,Repayment,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"After the principal is sent, the ""body"" of the contract begins to run.
There are two concurrent tracks. On the ""main track"", two repayments are scheduled.
On the ""side track"", the Borrower has to remain in good standing; if they default,
the Lender can warn them to get back on track, and trigger early repayment if they fail to do so.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
;;,,,§§,Repayment,,,,,,,,,,,,,
,,,,Repayment,,,,,,,,,,,,,
,,,MEANS,Main - Repay in two halves,,,,,,,,,,,,,
,,,AND,Side - Keep taxes paid,,,,,,,,,,,,,
;;,,,,,,,,,,,,,,,,,
//,Here we see two regulative rules connected by the HENCE keyword.,,,,,,,,,,,,,,,,
//,"This is called ""nesting"". One rule fits inside another.",,,,,,,,,,,,,,,,
//,,,EARLYRETURN,//,means if one track terminates then the other track also terminates,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"The actions in these clauses – request funds and remit principal – are decorated with details
given on the line below the main action. Each detail takes the form of a key/value pair.
Here, the keys are (loosely speaking) prepositions. So L4 supports not only propositional logic,
but also prepositional logic, ha ha.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"(In the future, we will be able to write the Repayment bits more compactly.
Here, the Repyament bits are a little more verbose than they strictly should be.)",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,Main - Repay in two halves,,,,,,,,,,,,,,,
,PARTY,Borrower,,,,,,,,,,,,,,,
,MUST,ON,1 June 2015,,,,,,,,,,,,,,
,DO,,repay,first half,,,,,,,,,,,,,
,,,in the amount of,$550,,,,,,,,,,,,,
,,,to,Lender,,,,,,,,,,,,,
,HENCE,second half,,,,,,,,,,,,,,,
,LEST,Payment default,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"In software, ""if-statements"" have two limbs: ""then"" and ""else"".",,,,,,,,,,,,,,,,
//,L4 uses HENCE and LEST to mean roughly the same thing.,,,,,,,,,,,,,,,,
//,"If a rule was satisfied, proceed to HENCE. Otherwise, do not pass go, do not collect $200; proceed instead to LEST.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§§,second half,,,,,,,,,,,,,,,
,,second half,,,,,,,,,,,,,,,
,MEANS,Main - Repay second half,,,,,,,,,,,,,,,
,AND,Side - Keep taxes paid 2,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"The syntax of L4 currently requires explicit expansion of parallel rules. In the future, a simpler process-algebraic notation will replace this.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,Main - Repay second half,,,,,,,,,,,,,,,
,PARTY,Borrower,,,,,,,,,,,,,,,
,MUST,,repay,second half,,,,,,,,,,,,,
,,,in the amount of,$525,,,,,,,,,,,,,
,,,to,Lender,,,,,,,,,,,,,
,ON,1 June 2016,,,,,,,,,,,,,,,
,LEST,Payment default,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
//,"There is some flexibility in how to organize the deadline – you can put it immediately after the MUST,
or you can put it on a line by itself.",,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,Side - Keep taxes paid,,,,,,,,,,,,,,,
,PARTY,Borrower,,,,,,,,,,,,,,,
,MUST,pay taxes and avoid general default,,,,,,,,,,,,,,,
,LEST,Payment default,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,Payment default,,,,,,,,,,,,,,,
,PARTY,Lender,,,,,,,,,,,,,,,
,MAY,notify,Borrower,,,,,,,,,,,,,,
,,of,default,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,HENCE,PARTY,Borrower,,,,,,,,,,,,,,
,,MUST,WITHIN,2,days,,,,,,,,,,,,
,,DO,resolve,default condition,,,,,,,,,,,,,
,,LEST,Accelerate outstanding payments,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,
,§,Accelerate outstanding payments,,,,,,,,,,,,,,,
,PARTY,Borrower,,,,,,,,,,,,,,,
,MUST,WITHIN,1 day,,,,,,,,,,,,,,
,DO,,repay,outstanding amount,,,,,,,,,,,,,
,,,to,Lender,,,,,,,,,,,,,